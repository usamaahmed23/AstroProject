---
const links = [
  { href: '/', label: 'Home' },
  { href: '/tags', label: 'Tags' },
  { href: '/about', label: 'About' },
];
---

<header class="border-b border-gray-200 dark:border-gray-700">
  <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
    <a href="/" class="text-xl font-bold">Astro Blog</a>
    <div class="flex items-center space-x-4">
      {links.map(link => (
        <a 
          href={link.href} 
          class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
        >
          {link.label}
        </a>
      ))}
      <button 
        id="theme-toggle" 
        class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"
        aria-label="Toggle dark mode"
      >
        <span class="dark:hidden">🌙</span>
        <span class="hidden dark:inline">☀️</span>
      </button>
    </div>
  </nav>
</header>

<script>
  const themeToggle = document.getElementById('theme-toggle');
  
  // Debounced theme toggle with RAF for smoother performance
  let toggleTimeout: number | null = null;
  
  themeToggle?.addEventListener('click', () => {
    if (toggleTimeout) return; // Prevent rapid clicking
    
    toggleTimeout = window.requestAnimationFrame(() => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.theme = isDark ? 'dark' : 'light';
      toggleTimeout = null;
    });
  });
</script>
